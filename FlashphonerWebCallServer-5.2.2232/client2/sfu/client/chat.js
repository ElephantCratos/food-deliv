const createChat=function(e,n,t,s){const a=SFU.constants,r="black",c="red",o="navy";e.on(a.SFU_ROOM_EVENT.MESSAGE,(function(e){i({userId:l(e.message),nickName:g(e.message),message:I(e.message)},c,r)})).on(a.SFU_ROOM_EVENT.JOINED,(function(e){i({userId:getShortUserId(e.userId),nickName:e.name,message:e.type},c,o)})).on(a.SFU_ROOM_EVENT.LEFT,(function(e){i({userId:getShortUserId(e.userId),nickName:e.name,message:e.type},c,o)}));const u=async function(){let n=t.value;t.value="",await e.sendMessage(n),i({userId:getShortUserId(e.userId()),nickName:nickName.value,message:n},"green",r)};s.addEventListener("click",u),t.onkeyup=function(e){if(13===e.keyCode)return e.shiftKey||u(),!1};const i=function(e,t,s){let a=document.createElement("div");a.setAttribute("class","message"),n.appendChild(a);let r=document.createElement("div");r.style.color=t,r.innerText=m()+" "+e.nickName+"#"+e.userId+":",a.appendChild(r);let c=document.createElement("div");c.style.color=s,c.innerText=e.message,a.appendChild(c),d()},d=function(){n.scrollTop=n.scrollHeight},m=function(){let e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},l=function(e){let n="unknown";return e.userId?n=e.userId:e.message.userId&&(n=e.message.userId),getShortUserId(n)},g=function(e){let n="unknown";return e.nickName?n=e.nickName:e.message.nickName&&(n=e.message.nickName),n},I=function(e){let n="";return e.message&&(n=JSON.parse(e.message).payload),n}};