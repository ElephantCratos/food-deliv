const stripCodecs=function(e,n){if(!n.length)return e;for(var r,t=e.split("\n"),o=n.split(","),i=[],s=0;s<o.length;s++)for(console.log("Searching for codec "+o[s]),r=0;r<t.length;r++)-1!==t[r].search(new RegExp(o[s],"i"))&&0===t[r].indexOf("a=rtpmap")&&(console.log(o[s]+" detected"),i.push(t[r].match(/[0-9]+/)[0]),t[r]="");if(i.length){for(s=0;s<i.length;s++)for(r=0;r<t.length;r++)-1===t[r].search("a=fmtp:"+i[s])&&-1===t[r].search("a=rtcp-fb:"+i[s])||(t[r]="");for(r=0;r<t.length;r++)if(-1!==t[r].search("m=audio")||-1!==t[r].search("m=video")){for(var a=t[r].split(" "),u="",c=0;c<a.length;c++)(-1===i.indexOf(a[c].trim())||c<=2)&&(u+=a[c],c<a.length-1&&(u+=" "));t[r]=u}}var d="";for(r=0;r<t.length;r++)""!==t[r]&&(d+=t[r]+"\n");return d},stripVideoCodecsExcept=function(e,n){let r="rtx";if("VP8"===n)r+=",H264";else{if("H264"!==n)return e;r+=",VP8"}return stripCodecs(e,r)},setURL=function(){var e,n;return"http:"==window.location.protocol?(e="ws://",n="8080"):(e="wss://",n="8443"),e+window.location.hostname+":"+n},getUrlParam=function(e){var n=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(n);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null},createUUID=function(e){for(var n=[],r="0123456789abcdef",t=0;t<36;t++)n[t]=r.substr(Math.floor(16*Math.random()),1);return n[14]="4",n[19]=r.substr(3&n[19]|8,1),n[8]=n[13]=n[18]=n[23]="-",n.join("").substring(0,e)},Browser=function(){return{isIE:function(){return!!document.documentMode},isFirefox:function(){return"undefined"!=typeof InstallTrigger},isChrome:function(){return!!window.chrome&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)&&!/OPR/.test(navigator.userAgent)},isEdge:function(){return!this.isIE()&&!!window.StyleMedia},isOpera:function(){return!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0},isSafari:function(){let e=navigator.userAgent.toLowerCase();return/(safari|applewebkit)/i.test(e)&&!e.includes("chrome")&&!e.includes("android")},isSafariWebRTC:function(){return navigator.mediaDevices&&this.isSafari()},isSamsungBrowser:function(){return/SamsungBrowser/i.test(navigator.userAgent)},isAndroid:function(){return navigator.userAgent.toLowerCase().indexOf("android")>-1},isiOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},isAndroidFirefox:function(){return this.isAndroid()&&/Firefox/i.test(navigator.userAgent)},isMobile:function(){return this.isAndroid()||this.isiOS()}}},playFirstSound=function(e,n){return new Promise((function(r,t){let o=document.createElement("audio");if(o.controls="controls",o.muted=!0,o.hidden=!0,o.preload="auto",o.type="audio/mpeg",n)return o.src=n,e.appendChild(o),void o.play().then((function(){o.remove(),r()})).catch((function(e){console.error("Can't play preloader: "+e),t()}));r()}))},getShortUserId=function(e){return e.substring(0,4)};